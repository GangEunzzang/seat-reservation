### FK는 직접 걸지 않음 모든 관계는 어플리케이션 레벨에서 처리

---
# Episode 
- Table Name: Episode
- Description: 연간 총회 회차 정보를 저장하는 테이블

## 컬럼 구조
- id: PK, bigint, not null, auto_increment, comment: 회차 고유 아이디
- year: int, not null, comment: 연도
- name: varchar(255), not null, comment: 회차 이름
- start_date: date, not null, comment: 회차 시작 날짜
- end_date: date, not null, comment: 회차 종료 날짜
- created_at: datetime, not null, default current_timestamp, comment: 생성 일시
- updated_at: datetime, not null, default current_timestamp on update current_timestamp, comment: 수정 일시

## 도메인 설명
- 연간 총회의 각 회차 정보를 관리합니다.

---
# Table 테이블
- Table Name: Table
- Description: 각 회차에 속한 테이블 정보를 저장하는 테이블

## 컬럼 구조
- id: PK, bigint, not null, auto_increment, comment: 테이블 고유 아이디
- episode_id: bigint, not null, comment: 회차 아이디
- created_at: datetime, not null, default current_timestamp, comment: 생성 일시
- updated_at: datetime, not null, default current_timestamp on update current_timestamp, comment: 수정 일시

## 도메인 설명
- 각 회차에 속한 테이블 정보를 관리합니다.
- 한 회차에 여러개의 테이블이 존재 할 수 있습니다.
- episode_id 컬럼은 Episode 테이블의 id 컬럼을 참조합니다.
- 각 테이블은 고유한 아이디를 가지며, 생성 및 수정 일시를 포함합니다.


---
# Seat 테이블
- Table Name: Seat
- Description: 각 테이블에 속한 좌석 정보를 저장하는 테이블

## 컬럼 구조

- id: PK, bigint, not null, auto_increment, comment: 좌석 고유 아이디
- table_id: bigint, not null, comment: 테이블 아이디
- seat_number: int, not null, comment: 좌석 번호
- created_at: datetime, not null, default current_timestamp, comment: 생성 일시
- updated_at: datetime, not null, default current_timestamp on update current_timestamp, comment: 수정 일시

## 도메인 설명
- 각 테이블에 속한 좌석의 물리적 정보를 관리합니다.
- 한 테이블에 여러 좌석이 존재 할 수 있습니다.
- table_id 컬럼은 Table 테이블의 id 컬럼을 참조합니다.
- 예약 정보는 별도의 Reservation 테이블에서 관리합니다.


---
# User
- Table Name: User
- Description: 총회 참석자 정보를 저장하는 테이블

## 컬럼 구조
- id: PK, bigint, not null, auto_increment, comment: 사용자 고유 아이디
- user_code: varchar(50), not null, unique, comment: 사용자 코드 (cCode와 동일)
- name: varchar(255), not null, comment: 사용자 이름
- department: varchar(255), not null, comment: 소속 학원
- position: varchar(255), not null, comment: 직위 (예: 원장, 부원장, 매니저 등)
- phone_number: varchar(20), not null, comment: 연락처
- episode_id: bigint, not null, comment: 회차 아이디
- created_at: datetime, not null, default current_timestamp, comment: 생성 일시
- updated_at: datetime, not null, default current_timestamp on update current_timestamp, comment: 수정 일시

## 도메인 설명
- 총회 참석자 정보를 관리합니다.
- 각 참석자는 고유한 아이디를 가지며, 이름, 소속 학원, 직위, 연락처 등의 정보를 포함합니다.
- 연간총회 별로 새로운 걸 생성한다.
- episode_id 컬럼은 Episode 테이블의 id 컬럼을 참조합니다.


---
# Reservation 테이블
- Table Name: Reservation
- Description: 좌석 예약 정보를 저장하는 테이블

## 컬럼 구조
- id: PK, bigint, not null, auto_increment, comment: 예약 고유 아이디
- user_id: bigint, not null, comment: 사용자 아이디
- seat_id: bigint, not null, comment: 좌석 아이디
- status: varchar(20), not null, default 'reserve', comment: 예약 상태 (reserve: 예약, cancel: 취소)
- reserved_at: datetime, not null, comment: 예약 일시
- cancelled_at: datetime, null, comment: 취소 일시
- created_at: datetime, not null, default current_timestamp, comment: 생성 일시
- updated_at: datetime, not null, default current_timestamp on update current_timestamp, comment: 수정 일시

## 인덱스
- idx_unique_active_seat: seat_id에 대한 UNIQUE INDEX (status='reserve'인 경우만 적용)
  → 한 좌석에 하나의 활성 예약만 가능하도록 보장

## 도메인 설명
- 사용자와 좌석 간의 예약 관계를 관리합니다.
- user_id 컬럼은 User 테이블의 id 컬럼을 참조합니다.
- seat_id 컬럼은 Seat 테이블의 id 컬럼을 참조합니다.
- status는 ReservationStatus Enum으로 관리됩니다 (reserve: 예약, cancel: 취소).
- 한 사용자는 여러 좌석을 예약할 수 있습니다.
- 한 좌석은 동시에 하나의 활성 예약(status='reserve')만 가질 수 있습니다.
- 예약 취소 시 status를 'cancel'로 변경하고 cancelled_at을 기록합니다 (Soft Delete).
- 예약 이력 추적이 가능하여 데이터 분석 및 감사에 활용할 수 있습니다.
- 빈 좌석 판단: 해당 seat_id에 대해 status='reserve'인 레코드가 없으면 빈 좌석입니다.
- episode_id 컬럼은 Episode 테이블의 id 컬럼을 참조합니다.


---
# Reservation 테이블
- Table Name: Reservation
- Description: 좌석 예약 정보를 저장하는 테이블

## 컬럼 구조
- id: PK, bigint, not null, auto_increment, comment: 예약 고유 아이디
- user_id: bigint, not null, comment: 사용자 아이디
- seat_id: bigint, not null, comment: 좌석 아이디
- status: varchar(20), not null, default 'RESERVED', comment: 예약 상태 (RESERVED, CANCELLED)
- reserved_at: datetime, not null, default current_timestamp, comment: 예약 일시
- cancelled_at: datetime, null, comment: 취소 일시
- created_at: datetime, not null, default current_timestamp, comment: 생성 일시
- updated_at: datetime, not null, default current_timestamp on update current_timestamp, comment: 수정 일시

## 도메인 설명
- 사용자와 좌석 간의 예약 관계를 관리합니다.
- user_id 컬럼은 User 테이블의 id 컬럼을 참조합니다.
- seat_id 컬럼은 Seat 테이블의 id 컬럼을 참조합니다.
- 한 사용자는 여러 좌석을 예약할 수 있습니다.
- 한 좌석은 동시에 하나의 활성 예약(status='RESERVED')만 가질 수 있습니다.
- 예약 취소 시 status를 'CANCELLED'로 변경하고 cancelled_at을 기록합니다.
- 예약 이력 추적이 가능하여 데이터 분석 및 감사에 활용할 수 있습니다.







